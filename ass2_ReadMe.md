# SQL Parser & Validator

Цей проєкт реалізує примітивний SQL-парсер та валідатор на Python із використанням бібліотеки [sqlglot](https://github.com/tobymao/sqlglot). 

Програма приймає SQL-запити користувача, проводить їх лексичний аналіз (токенізацію), парсинг у AST (Abstract Syntax Tree), виводить структуру дерева у вигляді JSON та здійснює базову валідацію структури запитів. Підтримуються основні типи SQL-запитів: `CREATE TABLE`, `INSERT INTO` та `SELECT`.

Важливо -
код і README були написані у співпраці з ChatGPT — штучним інтелектом від OpenAI.
---

## Опис коду

- **Lexer 1 (Tokenizer)**  
  Використовується клас `Tokenizer` з `sqlglot` для лексичного розбору вхідного SQL-запиту на токени. Токени відображають найдрібніші смислові одиниці мови SQL: ключові слова, ідентифікатори, знаки пунктуації, рядкові чи числові константи.

- **Lexer 2 (Preprocessor)**  
  Функція `preprocess_sql` — це простий препроцесор, що перетворює SQL запити з нетиповим синтаксисом (наприклад, `CREATE mytable (...)` без ключового слова `TABLE`) у стандартну форму (`CREATE TABLE mytable (...)`). Це своєрідна "друга лексика", що забезпечує коректний парсинг імен таблиць.

- **AST (Abstract Syntax Tree)**  
  Парсинг SQL виконується функцією `parse_one` із `sqlglot`, яка будує дерево виразів (AST). Ця структура потім перетворюється в словник для виводу у форматі JSON.

- **Валідація**  
  Функція `validate` здійснює базову логічну перевірку AST — наприклад, перевіряє наявність імені таблиці, визначених типів колонок у CREATE, коректність вставки значень у INSERT, і наявність колонок і джерела в SELECT.

- **Інтерактивний режим**  
  Головна функція `work()` організовує цикл введення SQL-запитів від користувача, підтримує команди `exit`/`quit` для виходу, та виводить результати токенізації, парсингу та валідації.

---

## Кастомні розширення

- Логіка `CREATE` може працювати без ключового слова `TABLE`. Програма автоматично додає `TABLE` у запит.  
  Приклад:  
  ```sql
  CREATE users (
    id INT,
    name TEXT
  )
- Логіка `INSERT` може працювати без ключового слова `INTO`. Програма автоматично додає `INTO` у запит.  
  Приклад:  
  ```sql
  INSERT users VALUES (1, 'Alice')
---

## Вимоги

- Python 3.8+
- Бібліотека `sqlglot` (встановлюється через `pip install sqlglot`)

---

## Запуск

Запустіть скрипт командою:

```bash
python assignment2.py
